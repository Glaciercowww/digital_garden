<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¥æœŸè®¡ç®—å·¥å…·</title>
    <style>
        :root {
            --primary-color: #4a6fa5;
            --primary-dark: #3a5985;
            --secondary-color: #ff6b6b;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --border-color: #dee2e6;
            --success-color: #28a745;
            --gray-color: #6c757d;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Microsoft YaHei', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', sans-serif;
            line-height: a1.6;
            color: var(--dark-color);
            background-color: #f5f7fa;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .current-time {
            background-color: var(--light-color);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-size: 1.2rem;
            margin-bottom: 30px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            border-left: 4px solid var(--primary-color);
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            font-weight: bold;
        }
        
        .tab:hover {
            color: var(--primary-color);
        }
        
        .tab.active {
            border-bottom: 3px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .card-title {
            font-size: 1.25rem;
            margin-bottom: 15px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
        }
        
        .card-title i {
            margin-right: 10px;
            font-size: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        input, select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--primary-color);
        }
        
        .date-input {
            position: relative;
        }
        
        .btn {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
        }
        
        .btn:hover {
            background-color: var(--primary-dark);
        }
        
        .btn-secondary {
            background-color: var(--gray-color);
        }
        
        .btn-secondary:hover {
            background-color: #5a6268;
        }
        
        .result {
            background-color: var(--light-color);
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            border-left: 4px solid var(--success-color);
            display: none;
        }
        
        .result.visible {
            display: block;
        }
        
        .calendar {
            width: 100%;
            margin-top: 20px;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .calendar-nav {
            display: flex;
            align-items: center;
        }
        
        .calendar-nav button {
            background-color: transparent;
            border: none;
            cursor: pointer;
            font-size: 1.5rem;
            color: var(--primary-color);
            padding: 0 10px;
        }
        
        .calendar-title {
            margin: 0 10px;
            font-weight: bold;
        }
        
        .calendar-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .calendar-table th, .calendar-table td {
            padding: 10px;
            text-align: center;
            border: 1px solid var(--border-color);
        }
        
        .calendar-table th {
            background-color: var(--primary-color);
            color: white;
        }
        
        .calendar-day {
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .calendar-day:hover {
            background-color: #e9ecef;
        }
        
        .calendar-day.today {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
        }
        
        .calendar-day.selected {
            background-color: var(--secondary-color);
            color: white;
            font-weight: bold;
        }
        
        .calendar-day.other-month {
            color: #adb5bd;
        }
        
        .flex-container {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .flex-item {
            flex: 1;
            min-width: 300px;
        }
        
        .icon {
            margin-right: 5px;
        }
        
        .special-days {
            margin-top: 20px;
        }
        
        .special-days-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .special-day-item {
            background-color: var(--light-color);
            padding: 8px;
            border-radius: 4px;
            border-left: 3px solid var(--primary-color);
        }
        
        .special-day-date {
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .world-clock {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .clock-item {
            background-color: var(--light-color);
            padding: 10px;
            border-radius: 5px;
            text-align: center;
        }
        
        .clock-city {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        /* é’ˆå¯¹ä¸åŒéƒ¨åˆ†çš„æ ·å¼ */
        #date-difference .card {
            border-top: 4px solid #4a6fa5;
        }
        
        #future-date .card {
            border-top: 4px solid #28a745;
        }
        
        #business-days .card {
            border-top: 4px solid #fd7e14;
        }
        
        #special-dates .card {
            border-top: 4px solid #6f42c1;
        }
        
        #world-clock .card {
            border-top: 4px solid #20c997;
        }
        
        @media (max-width: 768px) {
            .flex-container {
                flex-direction: column;
            }
            
            .calendar-table th, .calendar-table td {
                padding: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>æ—¥æœŸè®¡ç®—å·¥å…·</h1>
            <p>ç²¾ç¡®è®¡ç®—æ—¥æœŸé—´éš”ã€æœªæ¥æ—¥æœŸå’Œæ›´å¤šæ—¶é—´åŠŸèƒ½</p>
        </header>
        
        <div class="current-time" id="current-time">
            å½“å‰æ—¶é—´ï¼šæ­£åœ¨åŠ è½½...
        </div>
        
        <div class="tabs">
            <div class="tab active" data-tab="date-difference">æ—¥æœŸé—´éš”</div>
            <div class="tab" data-tab="future-date">æœªæ¥æ—¥æœŸ</div>
            <div class="tab" data-tab="business-days">å·¥ä½œæ—¥è®¡ç®—</div>
            <div class="tab" data-tab="special-dates">ç‰¹æ®Šæ—¥æœŸ</div>
            <div class="tab" data-tab="world-clock">ä¸–ç•Œæ—¶é’Ÿ</div>
        </div>
        
        <div class="tab-content active" id="date-difference">
            <div class="flex-container">
                <div class="flex-item">
                    <div class="card">
                        <div class="card-title">
                            <span class="icon">ğŸ“…</span> è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„é—´éš”
                        </div>
                        <div class="form-group">
                            <label for="date-start">å¼€å§‹æ—¥æœŸï¼š</label>
                            <input type="date" id="date-start" class="date-input">
                            <button class="btn btn-secondary" id="set-today-start" style="margin-top: 10px;">è®¾ä¸ºä»Šå¤©</button>
                        </div>
                        <div class="form-group">
                            <label for="date-end">ç»“æŸæ—¥æœŸï¼š</label>
                            <input type="date" id="date-end" class="date-input">
                            <button class="btn btn-secondary" id="set-today-end" style="margin-top: 10px;">è®¾ä¸ºä»Šå¤©</button>
                        </div>
                        <button class="btn" id="calculate-difference">è®¡ç®—é—´éš”</button>
                        <div class="result" id="difference-result"></div>
                    </div>
                </div>
                
                <div class="flex-item">
                    <div class="card">
                        <div class="calendar" id="calendar-difference">
                            <div class="calendar-header">
                                <div class="calendar-nav">
                                    <button id="prev-month">â—€</button>
                                    <div class="calendar-title" id="calendar-month-year">2025å¹´3æœˆ</div>
                                    <button id="next-month">â–¶</button>
                                </div>
                            </div>
                            <table class="calendar-table">
                                <thead>
                                    <tr>
                                        <th>æ—¥</th>
                                        <th>ä¸€</th>
                                        <th>äºŒ</th>
                                        <th>ä¸‰</th>
                                        <th>å››</th>
                                        <th>äº”</th>
                                        <th>å…­</th>
                                    </tr>
                                </thead>
                                <tbody id="calendar-body">
                                    <!-- æ—¥å†å†…å®¹å°†é€šè¿‡JavaScriptç”Ÿæˆ -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="future-date">
            <div class="flex-container">
                <div class="flex-item">
                    <div class="card">
                        <div class="card-title">
                            <span class="icon">â±ï¸</span> è®¡ç®—æœªæ¥æ—¥æœŸ
                        </div>
                        <div class="form-group">
                            <label for="start-date-future">å¼€å§‹æ—¥æœŸï¼š</label>
                            <input type="date" id="start-date-future" class="date-input">
                            <button class="btn btn-secondary" id="set-today-future" style="margin-top: 10px;">è®¾ä¸ºä»Šå¤©</button>
                        </div>
                        <div class="form-group">
                            <label for="days-to-add">æ·»åŠ å¤©æ•°ï¼š</label>
                            <input type="number" id="days-to-add" min="1" value="30">
                        </div>
                        <div class="form-group">
                            <label>æ·»åŠ å…¶ä»–æ—¶é—´å•ä½ï¼š</label>
                            <div style="display: flex; gap: 10px; margin-top: 5px;">
                                <input type="number" id="years-to-add" min="0" value="0" placeholder="å¹´" style="width: 30%;">
                                <input type="number" id="months-to-add" min="0" value="0" placeholder="æœˆ" style="width: 30%;">
                                <input type="number" id="weeks-to-add" min="0" value="0" placeholder="å‘¨" style="width: 30%;">
                            </div>
                        </div>
                        <button class="btn" id="calculate-future-date">è®¡ç®—æ—¥æœŸ</button>
                        <div class="result" id="future-date-result"></div>
                    </div>
                </div>
                
                <div class="flex-item">
                    <div class="card">
                        <div class="card-title">
                            <span class="icon">ğŸ”„</span> å¿«é€Ÿè®¡ç®—å¸¸ç”¨æ—¥æœŸ
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                            <button class="btn" id="tomorrow">æ˜å¤©</button>
                            <button class="btn" id="next-week">ä¸‹å‘¨ä»Šå¤©</button>
                            <button class="btn" id="next-month">ä¸‹ä¸ªæœˆä»Šå¤©</button>
                            <button class="btn" id="next-year">æ˜å¹´ä»Šå¤©</button>
                            <button class="btn" id="after-100-days">100å¤©å</button>
                            <button class="btn" id="after-1000-days">1000å¤©å</button>
                        </div>
                        <div class="result" id="quick-future-result"></div>
                    </div>
                    
                    <div class="card" style="margin-top: 20px;">
                        <div class="card-title">
                            <span class="icon">â®ï¸</span> è®¡ç®—è¿‡å»æ—¥æœŸ
                        </div>
                        <div class="form-group">
                            <label for="days-to-subtract">å‡å»å¤©æ•°ï¼š</label>
                            <input type="number" id="days-to-subtract" min="1" value="30">
                        </div>
                        <button class="btn" id="calculate-past-date">è®¡ç®—æ—¥æœŸ</button>
                        <div class="result" id="past-date-result"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="business-days">
            <div class="flex-container">
                <div class="flex-item">
                    <div class="card">
                        <div class="card-title">
                            <span class="icon">ğŸ’¼</span> å·¥ä½œæ—¥è®¡ç®—
                        </div>
                        <div class="form-group">
                            <label for="business-start-date">å¼€å§‹æ—¥æœŸï¼š</label>
                            <input type="date" id="business-start-date" class="date-input">
                        </div>
                        <div class="form-group">
                            <label for="business-end-date">ç»“æŸæ—¥æœŸï¼š</label>
                            <input type="date" id="business-end-date" class="date-input">
                        </div>
                        <div class="form-group">
                            <label>æ’é™¤å‘¨æœ«ï¼š</label>
                            <div style="display: flex; gap: 10px;">
                                <label style="display: inline-flex; align-items: center;">
                                    <input type="checkbox" id="exclude-saturday" checked>
                                    <span style="margin-left: 5px;">å‘¨å…­</span>
                                </label>
                                <label style="display: inline-flex; align-items: center;">
                                    <input type="checkbox" id="exclude-sunday" checked>
                                    <span style="margin-left: 5px;">å‘¨æ—¥</span>
                                </label>
                            </div>
                        </div>
                        <button class="btn" id="calculate-business-days">è®¡ç®—å·¥ä½œæ—¥</button>
                        <div class="result" id="business-days-result"></div>
                    </div>
                </div>
                
                <div class="flex-item">
                    <div class="card">
                        <div class="card-title">
                            <span class="icon">ğŸ“†</span> æ·»åŠ å·¥ä½œæ—¥
                        </div>
                        <div class="form-group">
                            <label for="add-business-start-date">å¼€å§‹æ—¥æœŸï¼š</label>
                            <input type="date" id="add-business-start-date" class="date-input">
                        </div>
                        <div class="form-group">
                            <label for="business-days-to-add">æ·»åŠ å·¥ä½œæ—¥å¤©æ•°ï¼š</label>
                            <input type="number" id="business-days-to-add" min="1" value="10">
                        </div>
                        <div class="form-group">
                            <label>æ’é™¤å‘¨æœ«ï¼š</label>
                            <div style="display: flex; gap: 10px;">
                                <label style="display: inline-flex; align-items: center;">
                                    <input type="checkbox" id="add-exclude-saturday" checked>
                                    <span style="margin-left: 5px;">å‘¨å…­</span>
                                </label>
                                <label style="display: inline-flex; align-items: center;">
                                    <input type="checkbox" id="add-exclude-sunday" checked>
                                    <span style="margin-left: 5px;">å‘¨æ—¥</span>
                                </label>
                            </div>
                        </div>
                        <button class="btn" id="calculate-business-future">è®¡ç®—æ—¥æœŸ</button>
                        <div class="result" id="business-future-result"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="special-dates">
            <div class="card">
                <div class="card-title">
                    <span class="icon">ğŸ‰</span> èŠ‚å‡æ—¥å’Œç‰¹æ®Šæ—¥æœŸ
                </div>
                <div class="form-group">
                    <label for="holiday-year">é€‰æ‹©å¹´ä»½ï¼š</label>
                    <select id="holiday-year">
                        <option value="2023">2023å¹´</option>
                        <option value="2024">2024å¹´</option>
                        <option value="2025" selected>2025å¹´</option>
                        <option value="2026">2026å¹´</option>
                    </select>
                </div>
                <button class="btn" id="show-holidays">æ˜¾ç¤ºèŠ‚å‡æ—¥</button>
                <div class="result" id="holidays-result">
                    <div class="special-days-list" id="holidays-list">
                        <!-- èŠ‚å‡æ—¥åˆ—è¡¨å°†é€šè¿‡JavaScriptç”Ÿæˆ -->
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-title">
                    <span class="icon">ğŸ‚</span> ç”Ÿæ—¥å’Œçºªå¿µæ—¥è®¡ç®—
                </div>
                <div class="form-group">
                    <label for="anniversary-date">é‡è¦æ—¥æœŸï¼š</label>
                    <input type="date" id="anniversary-date">
                </div>
                <div class="form-group">
                    <label for="anniversary-name">åç§°ï¼š</label>
                    <input type="text" id="anniversary-name" placeholder="ä¾‹å¦‚ï¼šç»“å©šçºªå¿µæ—¥ã€ç”Ÿæ—¥">
                </div>
                <button class="btn" id="add-anniversary">æ·»åŠ åˆ°åˆ—è¡¨</button>
                <button class="btn btn-secondary" id="clear-anniversaries" style="margin-left: 10px;">æ¸…ç©ºåˆ—è¡¨</button>
                
                <div class="special-days" id="anniversaries-container">
                    <h3>æ‚¨çš„é‡è¦æ—¥æœŸ</h3>
                    <div class="special-days-list" id="anniversaries-list">
                        <!-- çºªå¿µæ—¥åˆ—è¡¨å°†é€šè¿‡JavaScriptç”Ÿæˆå’Œä¿å­˜ -->
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="world-clock">
            <div class="card">
                <div class="card-title">
                    <span class="icon">ğŸŒ</span> ä¸–ç•Œæ—¶é’Ÿ
                </div>
                <div class="world-clock" id="world-clock-container">
                    <!-- ä¸–ç•Œæ—¶é’Ÿå°†é€šè¿‡JavaScriptç”Ÿæˆ -->
                </div>
            </div>
            
            <div class="card">
                <div class="card-title">
                    <span class="icon">ğŸ•’</span> æ—¶åŒºè½¬æ¢
                </div>
                <div class="form-group">
                    <label for="local-time">æœ¬åœ°æ—¶é—´ï¼š</label>
                    <input type="datetime-local" id="local-time">
                </div>
                <div class="form-group">
                    <label for="target-timezone">ç›®æ ‡æ—¶åŒºï¼š</label>
                    <select id="target-timezone">
                        <option value="UTC+0">UTC/GMT (UTC+0)</option>
                        <option value="UTC-8">å¤ªå¹³æ´‹æ ‡å‡†æ—¶é—´ (UTC-8)</option>
                        <option value="UTC-5">ä¸œéƒ¨æ ‡å‡†æ—¶é—´ (UTC-5)</option>
                        <option value="UTC+1">ä¸­æ¬§æ—¶é—´ (UTC+1)</option>
                        <option value="UTC+8" selected>ä¸­å›½æ ‡å‡†æ—¶é—´ (UTC+8)</option>
                        <option value="UTC+9">æ—¥æœ¬æ ‡å‡†æ—¶é—´ (UTC+9)</option>
                        <option value="UTC+10">æ¾³å¤§åˆ©äºšä¸œéƒ¨æ ‡å‡†æ—¶é—´ (UTC+10)</option>
                    </select>
                </div>
                <button class="btn" id="convert-timezone">è½¬æ¢æ—¶åŒº</button>
                <div class="result" id="timezone-result"></div>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // å½“å‰æ—¶é—´æ˜¾ç¤º
            function updateCurrentTime() {
                const now = new Date();
                const options = { 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric', 
                    weekday: 'long',
                    hour: '2-digit', 
                    minute: '2-digit', 
                    second: '2-digit',
                    hour12: false
                };
                document.getElementById('current-time').textContent = 
                    'å½“å‰æ—¶é—´ï¼š' + now.toLocaleDateString('zh-CN', options);
            }
            
            // åˆå§‹æ›´æ–°å’Œè®¾ç½®å®šæ—¶å™¨
            updateCurrentTime();
            setInterval(updateCurrentTime, 1000);
            
            // æ ‡ç­¾åˆ‡æ¢
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    tab.classList.add('active');
                    document.getElementById(tab.dataset.tab).classList.add('active');
                });
            });
            
            // åˆå§‹åŒ–æ—¥æœŸè¾“å…¥ä¸ºä»Šå¤©
            const today = new Date();
            const todayISO = today.toISOString().split('T')[0];
            
            document.getElementById('date-start').value = todayISO;
            document.getElementById('date-end').value = todayISO;
            document.getElementById('start-date-future').value = todayISO;
            document.getElementById('business-start-date').value = todayISO;
            document.getElementById('business-end-date').value = todayISO;
            document.getElementById('add-business-start-date').value = todayISO;
            
            // è®¾ç½®ä¸ºä»Šå¤©æŒ‰é’®
            document.getElementById('set-today-start').addEventListener('click', () => {
                document.getElementById('date-start').value = todayISO;
            });
            
            document.getElementById('set-today-end').addEventListener('click', () => {
                document.getElementById('date-end').value = todayISO;
            });
            
            document.getElementById('set-today-future').addEventListener('click', () => {
                document.getElementById('start-date-future').value = todayISO;
            });
            
            // è®¡ç®—æ—¥æœŸå·®å¼‚
            document.getElementById('calculate-difference').addEventListener('click', () => {
                const startDate = new Date(document.getElementById('date-start').value);
                const endDate = new Date(document.getElementById('date-end').value);
                
                // éªŒè¯æ—¥æœŸ
                if (isNaN(startDate.getTime()) || isNaN(endDate.getTime())) {
                    document.getElementById('difference-result').innerHTML = 'è¯·è¾“å…¥æœ‰æ•ˆçš„æ—¥æœŸ';
                    document.getElementById('difference-result').className = 'result visible';
                    return;
                }
                
                // è®¡ç®—å·®å¼‚ï¼ˆæ¯«ç§’ï¼‰
                const diffTime = Math.abs(endDate - startDate);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                // è®¡ç®—å¹´ã€æœˆã€æ—¥
                let years = 0;
                let months = 0;
                let days = 0;
                
                // ä¸´æ—¶æ—¥æœŸå¯¹è±¡ç”¨äºè®¡ç®—
                let tempDate = new Date(startDate);
                
                // è®¡ç®—å¹´
                while (tempDate <= endDate) {
                    tempDate.setFullYear(tempDate.getFullYear() + 1);
                    if (tempDate <= endDate) years++;
                }
                
                // é‡ç½®å¹¶è®¡ç®—æœˆ
                tempDate = new Date(startDate);
                tempDate.setFullYear(tempDate.getFullYear() + years);
                
                while (tempDate <= endDate) {
                    tempDate.setMonth(tempDate.getMonth() + 1);
                    if (tempDate <= endDate) months++;
                }
                
                // é‡ç½®å¹¶è®¡ç®—å‰©ä½™å¤©æ•°
                tempDate = new Date(startDate);
                tempDate.setFullYear(tempDate.getFullYear() + years);
                tempDate.setMonth(tempDate.getMonth() + months);
                
                while (tempDate < endDate) {
                    tempDate.setDate(tempDate.getDate() + 1);
                    days++;
                }
                
                // ç¡®å®šæ—¥æœŸé¡ºåºå’Œæè¿°
                let direction = 'ä¹‹å';
                if (startDate > endDate) {
                    direction = 'ä¹‹å‰';
                }
                
                // æ„å»ºæ˜¾ç¤ºç»“æœ
                let resultHTML = `<p><strong>æ€»è®¡: ${diffDays} å¤©</strong></p>`;
                
                resultHTML += `<p>è¯¦ç»†è®¡ç®—:</p>`;
                if (years > 0) {
                    resultHTML += `<p>${years} å¹´`;
                }
                if (months > 0) {
                    resultHTML += `${months} ä¸ªæœˆ`;
                }
                if (days > 0 || (years === 0 && months === 0)) {
                    resultHTML += `${days} å¤©`;
                }
                resultHTML += `</p>`;
                
                // æ˜¾ç¤ºä¸¤ä¸ªæ—¥æœŸæè¿°
                const startFormatted = startDate.toLocaleDateString('zh-CN');
                const endFormatted = endDate.toLocaleDateString('zh-CN');
                
                if (startDate.getTime() === endDate.getTime()) {
                    resultHTML += `<p>ä¸¤ä¸ªæ—¥æœŸç›¸åŒ</p>`;
                } else {
                    resultHTML += `<p>ç»“æŸæ—¥æœŸ ${endFormatted} æ˜¯å¼€å§‹æ—¥æœŸ ${startFormatted} ${direction}</p>`;
                }
                
                document.getElementById('difference-result').innerHTML = resultHTML;
                document.getElementById('difference-result').className = 'result visible';
            });
            
            // è®¡ç®—æœªæ¥æ—¥æœŸ
            document.getElementById('calculate-future-date').addEventListener('click', () => {
                const startDate = new Date(document.getElementById('start-date-future').value);
                const daysToAdd = parseInt(document.getElementById('days-to-add').value) || 0;
                const yearsToAdd = parseInt(document.getElementById('years-to-add').value) || 0;
                const monthsToAdd = parseInt(document.getElementById('months-to-add').value) || 0;
                const weeksToAdd = parseInt(document.getElementById('weeks-to-add').value) || 0;
                
                // éªŒè¯æ—¥æœŸ
                if (isNaN(startDate.getTime())) {
                    document.getElementById('future-date-result').innerHTML = 'è¯·è¾“å…¥æœ‰æ•ˆçš„å¼€å§‹æ—¥æœŸ';
                    document.getElementById('future-date-result').className = 'result visible';
                    return;
                }
                
                // åˆ›å»ºæ–°æ—¥æœŸå¯¹è±¡å¹¶æ·»åŠ æ—¶é—´
                const futureDate = new Date(startDate);
                futureDate.setFullYear(futureDate.getFullYear() + yearsToAdd);
                futureDate.setMonth(futureDate.getMonth() + monthsToAdd);
                futureDate.setDate(futureDate.getDate() + daysToAdd + (weeksToAdd * 7));
                
                // è®¡ç®—æ€»å¤©æ•°å·®å¼‚
                const diffTime = Math.abs(futureDate - startDate);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                // æ ¼å¼åŒ–æ—¥æœŸ
                const startFormatted = startDate.toLocaleDateString('zh-CN');
                const futureFormatted = futureDate.toLocaleDateString('zh-CN');
                const futureWeekday = ['æ˜ŸæœŸæ—¥', 'æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­'][futureDate.getDay()];
                
                // æ„å»ºæ˜¾ç¤ºç»“æœ
                let resultHTML = `<p>è®¡ç®—ç»“æœ: <strong>${futureFormatted} ${futureWeekday}</strong></p>`;
                
                let addedDescription = [];
                if (yearsToAdd > 0) addedDescription.push(`${yearsToAdd}å¹´`);
                if (monthsToAdd > 0) addedDescription.push(`${monthsToAdd}ä¸ªæœˆ`);
                if (weeksToAdd > 0) addedDescription.push(`${weeksToAdd}å‘¨`);
                if (daysToAdd > 0) addedDescription.push(`${daysToAdd}å¤©`);
                
                resultHTML += `<p>ä» ${startFormatted} å¼€å§‹ï¼Œæ·»åŠ äº† ${addedDescription.join('ã€')}ï¼Œæ€»å…±ç›¸å·® ${diffDays} å¤©</p>`;
                
                document.getElementById('future-date-result').innerHTML = resultHTML;
                document.getElementById('future-date-result').className = 'result visible';
            });
            
            // å¿«é€Ÿè®¡ç®—å¸¸ç”¨æœªæ¥æ—¥æœŸ
            function setupQuickFutureButton(buttonId, daysToAdd, monthsToAdd = 0, yearsToAdd = 0) {
                document.getElementById(buttonId).addEventListener('click', () => {
                    const now = new Date();
                    const futureDate = new Date(now);
                    
                    futureDate.setFullYear(futureDate.getFullYear() + yearsToAdd);
                    futureDate.setMonth(futureDate.getMonth() + monthsToAdd);
                    futureDate.setDate(futureDate.getDate() + daysToAdd);
                    
                    const futureFormatted = futureDate.toLocaleDateString('zh-CN');
                    const futureWeekday = ['æ˜ŸæœŸæ—¥', 'æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­'][futureDate.getDay()];
                    
                    let description;
                    if (buttonId === 'tomorrow') description = 'æ˜å¤©';
                    else if (buttonId === 'next-week') description = 'ä¸‹å‘¨ä»Šå¤©';
                    else if (buttonId === 'next-month') description = 'ä¸‹ä¸ªæœˆä»Šå¤©';
                    else if (buttonId === 'next-year') description = 'æ˜å¹´ä»Šå¤©';
                    else if (buttonId === 'after-100-days') description = '100å¤©å';
                    else if (buttonId === 'after-1000-days') description = '1000å¤©å';
                    
                    const resultHTML = `<p>${description}æ˜¯: <strong>${futureFormatted} ${futureWeekday}</strong></p>`;
                    
                    document.getElementById('quick-future-result').innerHTML = resultHTML;
                    document.getElementById('quick-future-result').className = 'result visible';
                });
            }
            
            setupQuickFutureButton('tomorrow', 1);
            setupQuickFutureButton('next-week', 7);
            setupQuickFutureButton('next-month', 0, 1);
            setupQuickFutureButton('next-year', 0, 0, 1);
            setupQuickFutureButton('after-100-days', 100);
            setupQuickFutureButton('after-1000-days', 1000);
            
            // è®¡ç®—è¿‡å»æ—¥æœŸ
            document.getElementById('calculate-past-date').addEventListener('click', () => {
                const now = new Date();
                const daysToSubtract = parseInt(document.getElementById('days-to-subtract').value) || 0;
                
                const pastDate = new Date(now);
                pastDate.setDate(pastDate.getDate() - daysToSubtract);
                
                const pastFormatted = pastDate.toLocaleDateString('zh-CN');
                const pastWeekday = ['æ˜ŸæœŸæ—¥', 'æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­'][pastDate.getDay()];
                
                const resultHTML = `<p>${daysToSubtract}å¤©å‰æ˜¯: <strong>${pastFormatted} ${pastWeekday}</strong></p>`;
                
                document.getElementById('past-date-result').innerHTML = resultHTML;
                document.getElementById('past-date-result').className = 'result visible';
            });
            
            // è®¡ç®—å·¥ä½œæ—¥
            document.getElementById('calculate-business-days').addEventListener('click', () => {
                const startDate = new Date(document.getElementById('business-start-date').value);
                const endDate = new Date(document.getElementById('business-end-date').value);
                const excludeSaturday = document.getElementById('exclude-saturday').checked;
                const excludeSunday = document.getElementById('exclude-sunday').checked;
                
                // éªŒè¯æ—¥æœŸ
                if (isNaN(startDate.getTime()) || isNaN(endDate.getTime())) {
                    document.getElementById('business-days-result').innerHTML = 'è¯·è¾“å…¥æœ‰æ•ˆçš„æ—¥æœŸ';
                    document.getElementById('business-days-result').className = 'result visible';
                    return;
                }
                
                // ç¡®ä¿å¼€å§‹æ—¥æœŸä¸æ™šäºç»“æŸæ—¥æœŸ
                let start = new Date(startDate);
                let end = new Date(endDate);
                let swapped = false;
                
                if (start > end) {
                    [start, end] = [end, start];
                    swapped = true;
                }
                
                // è®¡ç®—å·¥ä½œæ—¥
                let businessDays = 0;
                let current = new Date(start);
                
                while (current <= end) {
                    const dayOfWeek = current.getDay(); // 0 = å‘¨æ—¥, 6 = å‘¨å…­
                    
                    if (
                        (dayOfWeek !== 0 || !excludeSunday) && 
                        (dayOfWeek !== 6 || !excludeSaturday)
                    ) {
                        businessDays++;
                    }
                    
                    current.setDate(current.getDate() + 1);
                }
                
                // æ ¼å¼åŒ–æ—¥æœŸ
                const startFormatted = start.toLocaleDateString('zh-CN');
                const endFormatted = end.toLocaleDateString('zh-CN');
                
                // æ„å»ºæ˜¾ç¤ºç»“æœ
                let resultHTML = `<p>å·¥ä½œæ—¥æ€»æ•°: <strong>${businessDays} å¤©</strong></p>`;
                resultHTML += `<p>ä» ${swapped ? endFormatted : startFormatted} åˆ° ${swapped ? startFormatted : endFormatted}</p>`;
                
                let excluded = [];
                if (excludeSaturday) excluded.push('å‘¨å…­');
                if (excludeSunday) excluded.push('å‘¨æ—¥');
                
                if (excluded.length > 0) {
                    resultHTML += `<p>å·²æ’é™¤: ${excluded.join('å’Œ')}</p>`;
                }
                
                document.getElementById('business-days-result').innerHTML = resultHTML;
                document.getElementById('business-days-result').className = 'result visible';
            });
            
            // æ·»åŠ å·¥ä½œæ—¥è®¡ç®—æœªæ¥æ—¥æœŸ
            document.getElementById('calculate-business-future').addEventListener('click', () => {
                const startDate = new Date(document.getElementById('add-business-start-date').value);
                const businessDaysToAdd = parseInt(document.getElementById('business-days-to-add').value) || 0;
                const excludeSaturday = document.getElementById('add-exclude-saturday').checked;
                const excludeSunday = document.getElementById('add-exclude-sunday').checked;
                
                // éªŒè¯æ—¥æœŸ
                if (isNaN(startDate.getTime())) {
                    document.getElementById('business-future-result').innerHTML = 'è¯·è¾“å…¥æœ‰æ•ˆçš„å¼€å§‹æ—¥æœŸ';
                    document.getElementById('business-future-result').className = 'result visible';
                    return;
                }
                
                // è®¡ç®—æœªæ¥å·¥ä½œæ—¥
                let businessDaysAdded = 0;
                let current = new Date(startDate);
                
                while (businessDaysAdded < businessDaysToAdd) {
                    current.setDate(current.getDate() + 1);
                    const dayOfWeek = current.getDay();
                    
                    if (
                        (dayOfWeek !== 0 || !excludeSunday) && 
                        (dayOfWeek !== 6 || !excludeSaturday)
                    ) {
                        businessDaysAdded++;
                    }
                }
                
                // æ ¼å¼åŒ–æ—¥æœŸ
                const startFormatted = startDate.toLocaleDateString('zh-CN');
                const resultFormatted = current.toLocaleDateString('zh-CN');
                const resultWeekday = ['æ˜ŸæœŸæ—¥', 'æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­'][current.getDay()];
                
                // è®¡ç®—å®é™…å¤©æ•°å·®å¼‚
                const diffTime = Math.abs(current - startDate);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                // æ„å»ºæ˜¾ç¤ºç»“æœ
                let resultHTML = `<p>æ·»åŠ  ${businessDaysToAdd} ä¸ªå·¥ä½œæ—¥åçš„æ—¥æœŸ: <strong>${resultFormatted} ${resultWeekday}</strong></p>`;
                resultHTML += `<p>ä» ${startFormatted} å¼€å§‹ï¼Œæ€»å…±ç›¸å·® ${diffDays} å¤©</p>`;
                
                let excluded = [];
                if (excludeSaturday) excluded.push('å‘¨å…­');
                if (excludeSunday) excluded.push('å‘¨æ—¥');
                
                if (excluded.length > 0) {
                    resultHTML += `<p>å·²æ’é™¤: ${excluded.join('å’Œ')}</p>`;
                }
                
                document.getElementById('business-future-result').innerHTML = resultHTML;
                document.getElementById('business-future-result').className = 'result visible';
            });
            
            // æ—¥å†ç›¸å…³åŠŸèƒ½
            let currentCalendarDate = new Date();
            let selectedStartDate = null;
            let selectedEndDate = null;
            
            function updateCalendar() {
                const year = currentCalendarDate.getFullYear();
                const month = currentCalendarDate.getMonth();
                
                // æ›´æ–°æ—¥å†æ ‡é¢˜
                document.getElementById('calendar-month-year').textContent = 
                    `${year}å¹´${month + 1}æœˆ`;
                
                // æ¸…ç©ºæ—¥å†ä¸»ä½“
                const calendarBody = document.getElementById('calendar-body');
                calendarBody.innerHTML = '';
                
                // å½“æœˆç¬¬ä¸€å¤©å’Œæœ€åä¸€å¤©
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                
                // ä¸Šä¸ªæœˆæœ€åå‡ å¤©ï¼ˆç”¨äºå¡«å……æ—¥å†é¦–è¡Œï¼‰
                const prevMonthLastDay = new Date(year, month, 0).getDate();
                const firstDayOfWeek = firstDay.getDay(); // 0 = å‘¨æ—¥
                
                // å½“å¤©æ—¥æœŸ
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                
                // ç”Ÿæˆæ—¥å†
                let date = 1;
                let nextMonthDate = 1;
                
                // åˆ›å»º6è¡Œï¼ˆæœ€å¤§å¯èƒ½è¡Œæ•°ï¼‰
                for (let i = 0; i < 6; i++) {
                    // å¦‚æœå·²ç»è¶…è¿‡äº†å½“æœˆæœ€åä¸€å¤©ä¸”å·²ç»æ˜¾ç¤ºäº†ä¸€å‘¨çš„ä¸‹ä¸ªæœˆæ—¥æœŸï¼Œåˆ™åœæ­¢
                    if (date > lastDay.getDate() && i > 0) break;
                    
                    const row = document.createElement('tr');
                    
                    // åˆ›å»º7åˆ—ï¼ˆå‘¨æ—¥åˆ°å‘¨å…­ï¼‰
                    for (let j = 0; j < 7; j++) {
                        const cell = document.createElement('td');
                        cell.classList.add('calendar-day');
                        
                        // å¡«å……ä¸Šä¸ªæœˆçš„æ—¥æœŸ
                        if (i === 0 && j < firstDayOfWeek) {
                            const prevDate = prevMonthLastDay - (firstDayOfWeek - j - 1);
                            cell.textContent = prevDate;
                            cell.classList.add('other-month');
                        }
                        // å¡«å……å½“æœˆçš„æ—¥æœŸ
                        else if (date <= lastDay.getDate()) {
                            cell.textContent = date;
                            
                            // æ£€æŸ¥æ˜¯å¦æ˜¯ä»Šå¤©
                            const currentDate = new Date(year, month, date);
                            if (currentDate.toDateString() === today.toDateString()) {
                                cell.classList.add('today');
                            }
                            
                            // æ£€æŸ¥æ˜¯å¦æ˜¯é€‰ä¸­çš„å¼€å§‹æ—¥æœŸ
                            if (selectedStartDate && currentDate.toDateString() === selectedStartDate.toDateString()) {
                                cell.classList.add('selected');
                            }
                            
                            // æ£€æŸ¥æ˜¯å¦æ˜¯é€‰ä¸­çš„ç»“æŸæ—¥æœŸ
                            if (selectedEndDate && currentDate.toDateString() === selectedEndDate.toDateString()) {
                                cell.classList.add('selected');
                            }
                            
                            // æ·»åŠ ç‚¹å‡»äº‹ä»¶
                            cell.addEventListener('click', () => {
                                const clickedDate = new Date(year, month, parseInt(cell.textContent));
                                selectDate(clickedDate);
                            });
                            
                            date++;
                        }
                        // å¡«å……ä¸‹ä¸ªæœˆçš„æ—¥æœŸ
                        else {
                            cell.textContent = nextMonthDate;
                            cell.classList.add('other-month');
                            nextMonthDate++;
                        }
                        
                        row.appendChild(cell);
                    }
                    
                    calendarBody.appendChild(row);
                }
            }
            
            // ä¸Šä¸ªæœˆå’Œä¸‹ä¸ªæœˆæŒ‰é’®
            document.getElementById('prev-month').addEventListener('click', () => {
                currentCalendarDate.setMonth(currentCalendarDate.getMonth() - 1);
                updateCalendar();
            });
            
            document.getElementById('next-month').addEventListener('click', () => {
                currentCalendarDate.setMonth(currentCalendarDate.getMonth() + 1);
                updateCalendar();
            });
            
            // é€‰æ‹©æ—¥æœŸ
            function selectDate(date) {
                // å¦‚æœæ²¡æœ‰é€‰æ‹©å¼€å§‹æ—¥æœŸï¼Œæˆ–è€…å·²ç»é€‰æ‹©äº†ç»“æŸæ—¥æœŸï¼Œåˆ™é‡æ–°å¼€å§‹é€‰æ‹©
                if (!selectedStartDate || selectedEndDate) {
                    selectedStartDate = date;
                    selectedEndDate = null;
                    document.getElementById('date-start').value = formatDateForInput(date);
                }
                // å¦‚æœå·²é€‰æ‹©å¼€å§‹æ—¥æœŸï¼Œåˆ™é€‰æ‹©ç»“æŸæ—¥æœŸ
                else {
                    // ç¡®ä¿å¼€å§‹æ—¥æœŸä¸æ™šäºç»“æŸæ—¥æœŸ
                    if (date < selectedStartDate) {
                        selectedEndDate = selectedStartDate;
                        selectedStartDate = date;
                        document.getElementById('date-start').value = formatDateForInput(date);
                        document.getElementById('date-end').value = formatDateForInput(selectedEndDate);
                    } else {
                        selectedEndDate = date;
                        document.getElementById('date-end').value = formatDateForInput(date);
                    }
                    
                    // è‡ªåŠ¨è®¡ç®—æ—¥æœŸå·®å¼‚
                    document.getElementById('calculate-difference').click();
                }
                
                updateCalendar();
            }
            
            // æ ¼å¼åŒ–æ—¥æœŸä¸ºinputå…ƒç´ æ‰€éœ€çš„æ ¼å¼
            function formatDateForInput(date) {
                const year = date.getFullYear();
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                return `${year}-${month}-${day}`;
            }
            
            // åˆå§‹åŒ–æ—¥å†
            updateCalendar();
            
            // ä¸­å›½èŠ‚å‡æ—¥æ•°æ®
            const chineseHolidays = {
                '2023': [
                    { name: 'å…ƒæ—¦', date: '2023-01-01' },
                    { name: 'æ˜¥èŠ‚', date: '2023-01-22' },
                    { name: 'æ¸…æ˜èŠ‚', date: '2023-04-05' },
                    { name: 'åŠ³åŠ¨èŠ‚', date: '2023-05-01' },
                    { name: 'ç«¯åˆèŠ‚', date: '2023-06-22' },
                    { name: 'ä¸­ç§‹èŠ‚', date: '2023-09-29' },
                    { name: 'å›½åº†èŠ‚', date: '2023-10-01' }
                ],
                '2024': [
                    { name: 'å…ƒæ—¦', date: '2024-01-01' },
                    { name: 'æ˜¥èŠ‚', date: '2024-02-10' },
                    { name: 'æ¸…æ˜èŠ‚', date: '2024-04-04' },
                    { name: 'åŠ³åŠ¨èŠ‚', date: '2024-05-01' },
                    { name: 'ç«¯åˆèŠ‚', date: '2024-06-10' },
                    { name: 'ä¸­ç§‹èŠ‚', date: '2024-09-17' },
                    { name: 'å›½åº†èŠ‚', date: '2024-10-01' }
                ],
                '2025': [
                    { name: 'å…ƒæ—¦', date: '2025-01-01' },
                    { name: 'æ˜¥èŠ‚', date: '2025-01-29' },
                    { name: 'æ¸…æ˜èŠ‚', date: '2025-04-04' },
                    { name: 'åŠ³åŠ¨èŠ‚', date: '2025-05-01' },
                    { name: 'ç«¯åˆèŠ‚', date: '2025-05-31' },
                    { name: 'ä¸­ç§‹èŠ‚', date: '2025-10-06' },
                    { name: 'å›½åº†èŠ‚', date: '2025-10-01' }
                ],
                '2026': [
                    { name: 'å…ƒæ—¦', date: '2026-01-01' },
                    { name: 'æ˜¥èŠ‚', date: '2026-02-17' },
                    { name: 'æ¸…æ˜èŠ‚', date: '2026-04-04' },
                    { name: 'åŠ³åŠ¨èŠ‚', date: '2026-05-01' },
                    { name: 'ç«¯åˆèŠ‚', date: '2026-06-19' },
                    { name: 'ä¸­ç§‹èŠ‚', date: '2026-09-25' },
                    { name: 'å›½åº†èŠ‚', date: '2026-10-01' }
                ]
            };
            
            // æ˜¾ç¤ºèŠ‚å‡æ—¥
            document.getElementById('show-holidays').addEventListener('click', () => {
                const year = document.getElementById('holiday-year').value;
                const holidays = chineseHolidays[year] || [];
                
                if (holidays.length === 0) {
                    document.getElementById('holidays-list').innerHTML = '<p>æ²¡æœ‰æ‰¾åˆ°è¯¥å¹´ä»½çš„èŠ‚å‡æ—¥æ•°æ®</p>';
                    document.getElementById('holidays-result').className = 'result visible';
                    return;
                }
                
                let html = '';
                
                for (const holiday of holidays) {
                    const date = new Date(holiday.date);
                    const formattedDate = date.toLocaleDateString('zh-CN');
                    
                    html += `
                        <div class="special-day-item">
                            <div class="special-day-date">${holiday.name}</div>
                            <div>${formattedDate}</div>
                        </div>
                    `;
                }
                
                document.getElementById('holidays-list').innerHTML = html;
                document.getElementById('holidays-result').className = 'result visible';
            });
            
            // çºªå¿µæ—¥ç®¡ç†
            let anniversaries = JSON.parse(localStorage.getItem('anniversaries') || '[]');
            
            function updateAnniversaries() {
                const container = document.getElementById('anniversaries-list');
                
                if (anniversaries.length === 0) {
                    container.innerHTML = '<p>æ‚¨å°šæœªæ·»åŠ ä»»ä½•é‡è¦æ—¥æœŸ</p>';
                    return;
                }
                
                let html = '';
                const today = new Date();
                
                for (const anniv of anniversaries) {
                    const date = new Date(anniv.date);
                    const formattedDate = date.toLocaleDateString('zh-CN');
                    
                    // è®¡ç®—å¤©æ•°å·®å¼‚
                    const daysDiff = Math.floor((today - date) / (1000 * 60 * 60 * 24));
                    
                    // è®¡ç®—ä»Šå¹´çš„çºªå¿µæ—¥
                    const thisYear = today.getFullYear();
                    const thisYearAnniv = new Date(date);
                    thisYearAnniv.setFullYear(thisYear);
                    
                    // å¦‚æœä»Šå¹´çš„çºªå¿µæ—¥å·²ç»è¿‡å»ï¼Œè®¡ç®—ä¸‹ä¸€å¹´çš„
                    if (thisYearAnniv < today) {
                        thisYearAnniv.setFullYear(thisYear + 1);
                    }
                    
                    // è®¡ç®—è·ç¦»ä¸‹ä¸€æ¬¡çºªå¿µæ—¥çš„å¤©æ•°
                    const daysUntilNext = Math.ceil((thisYearAnniv - today) / (1000 * 60 * 60 * 24));
                    
                    html += `
                        <div class="special-day-item">
                            <div class="special-day-date">${anniv.name}</div>
                            <div>${formattedDate}</div>
                            <div>å·²ç» ${daysDiff} å¤©</div>
                            <div>è·ç¦»ä¸‹æ¬¡è¿˜æœ‰ ${daysUntilNext} å¤©</div>
                        </div>
                    `;
                }
                
                container.innerHTML = html;
            }
            
            // æ·»åŠ çºªå¿µæ—¥
            document.getElementById('add-anniversary').addEventListener('click', () => {
                const date = document.getElementById('anniversary-date').value;
                const name = document.getElementById('anniversary-name').value.trim();
                
                if (!date || !name) {
                    alert('è¯·è¾“å…¥æ—¥æœŸå’Œåç§°');
                    return;
                }
                
                anniversaries.push({ date, name });
                localStorage.setItem('anniversaries', JSON.stringify(anniversaries));
                
                // æ¸…ç©ºè¾“å…¥æ¡†
                document.getElementById('anniversary-date').value = '';
                document.getElementById('anniversary-name').value = '';
                
                updateAnniversaries();
            });
            
            // æ¸…ç©ºçºªå¿µæ—¥
            document.getElementById('clear-anniversaries').addEventListener('click', () => {
                if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰çºªå¿µæ—¥å—ï¼Ÿ')) {
                    anniversaries = [];
                    localStorage.setItem('anniversaries', JSON.stringify(anniversaries));
                    updateAnniversaries();
                }
            });
            
            // ä¸–ç•Œæ—¶é’Ÿ
            const cities = [
                { name: 'åŒ—äº¬', timezone: 'Asia/Shanghai' },
                { name: 'çº½çº¦', timezone: 'America/New_York' },
                { name: 'ä¼¦æ•¦', timezone: 'Europe/London' },
                { name: 'ä¸œäº¬', timezone: 'Asia/Tokyo' },
                { name: 'æ‚‰å°¼', timezone: 'Australia/Sydney' },
                { name: 'å·´é»', timezone: 'Europe/Paris' }
            ];
            
            function updateWorldClock() {
                const container = document.getElementById('world-clock-container');
                let html = '';
                
                for (const city of cities) {
                    const options = {
                        timeZone: city.timezone,
                        hour: '2-digit',
                        minute: '2-digit',
                        second: '2-digit',
                        hour12: false
                    };
                    
                    const time = new Date().toLocaleTimeString('zh-CN', options);
                    
                    html += `
                        <div class="clock-item">
                            <div class="clock-city">${city.name}</div>
                            <div class="clock-time">${time}</div>
                        </div>
                    `;
                }
                
                container.innerHTML = html;
            }
            
            // åˆå§‹åŒ–ä¸–ç•Œæ—¶é’Ÿå¹¶è®¾ç½®å®šæ—¶æ›´æ–°
            updateWorldClock();
            setInterval(updateWorldClock, 1000);
            
            // æ—¶åŒºè½¬æ¢
            document.getElementById('convert-timezone').addEventListener('click', () => {
                const localTimeStr = document.getElementById('local-time').value;
                const targetTimezone = document.getElementById('target-timezone').value;
                
                if (!localTimeStr) {
                    document.getElementById('timezone-result').innerHTML = 'è¯·é€‰æ‹©æœ¬åœ°æ—¶é—´';
                    document.getElementById('timezone-result').className = 'result visible';
                    return;
                }
                
                // è§£ææ—¶åŒºåç§»é‡
                const match = targetTimezone.match(/UTC([+-])(\d+)/);
                if (!match) {
                    document.getElementById('timezone-result').innerHTML = 'æ— æ•ˆçš„æ—¶åŒº';
                    document.getElementById('timezone-result').className = 'result visible';
                    return;
                }
                
                const sign = match[1] === '+' ? 1 : -1;
                const hours = parseInt(match[2]);
                
                // è§£ææœ¬åœ°æ—¶é—´
                const localTime = new Date(localTimeStr);
                
                // è®¡ç®—UTCæ—¶é—´
                const utcTime = new Date(localTime.getTime() - (localTime.getTimezoneOffset() * 60000));
                
                // è®¡ç®—ç›®æ ‡æ—¶åŒºæ—¶é—´
                const targetTime = new Date(utcTime.getTime() + (hours * sign * 3600000));
                
                // æ ¼å¼åŒ–ç»“æœ
                const localFormatted = localTime.toLocaleString('zh-CN');
                const targetFormatted = targetTime.toLocaleString('zh-CN');
                
                let resultHTML = `<p>æœ¬åœ°æ—¶é—´: ${localFormatted}</p>`;
                resultHTML += `<p>${document.getElementById('target-timezone').options[document.getElementById('target-timezone').selectedIndex].text}: ${targetFormatted}</p>`;
                
                document.getElementById('timezone-result').innerHTML = resultHTML;
                document.getElementById('timezone-result').className = 'result visible';
            });
            
            // è®¾ç½®å½“å‰æœ¬åœ°æ—¶é—´
            const now = new Date();
            const localTime = now.toISOString().slice(0, 16);
            document.getElementById('local-time').value = localTime;
            
            // åˆå§‹åŒ–çºªå¿µæ—¥åˆ—è¡¨
            updateAnniversaries();
        });
    </script>
</body>
</html>